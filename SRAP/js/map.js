
mapboxgl.accessToken = 'pk.eyJ1IjoibW9oYWhtIiwiYSI6ImNpd25pM2o4dzAzc2oyem5uanpyem52bmQifQ.CVOmI-BXOv7qwc6QFHNStA';

var map = new mapboxgl.Map({
	container: 'map',
	style: 'mapbox://styles/mohahm/ciwxzsn5b00112pr2sq10c15g', 	
	zoom: 1  
});

// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());

map.on('load', function () {
	map.addSource('rooms', {
		'type': 'geojson',
		'data': {
			"type": "FeatureCollection",
			"features": [{
		        'type': 'Feature',
			    'geometry': {
			        'type': 'Polygon',
			        'coordinates': [[[-63.720703125,-47.3090342477478],
            			[-63.720703125,-30.334953881988564],
            			[-44.1650390625,-30.334953881988564],
            			[-44.1650390625,-47.3090342477478],
            			[-63.720703125,-47.3090342477478]]]
			    },
			    "properties": {
			        "id": "U1-048",
			        "message": "Available seats (7 of 8)",
			        "status": "Available"
			    }
		    },	
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-77.255859375,-47.338822694822],
            			[ -77.255859375,-30.410781790845878],
            			[-64.423828125,-30.410781790845878],
            			[-64.423828125,-47.338822694822],
            			[-77.255859375,-47.338822694822]]]
			    },
			    "properties": {
			        "id": "U1-049",
			        "message": "Available seats (0)",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-97.470703125,-37.822802433527556],
            			[-97.470703125,-30.410781790845878],
            			[-77.95898437499999,-30.410781790845878],
            			[-77.95898437499999,-37.822802433527556],
            			[-97.470703125,-37.822802433527556]]]
			    },
			    "properties": {
			        "id": "U1-050A",
			        "message": "Available seats (5)",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-97.470703125,-47.39834920035925],
            			[-97.470703125,-40.88029480552823],
            			[-77.95898437499999,-40.88029480552823],
            			[-77.95898437499999,-47.39834920035925],
            			[-97.470703125,-47.39834920035925]]]
			    },
			    "properties": {
			        "id": "U1-050B",
			        "message": "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.71679687499999,-47.12995075666305],
            			[-124.71679687499999,-30.372875188118016],
            			[-111.8408203125,-30.372875188118016],
            			[-111.8408203125,-47.12995075666305],
            			[-124.71679687499999,-47.12995075666305]]]
			    },
			    "properties": {
			        "id": "U1-062",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.67285156250001,-29.764377375163114],
            			[-124.67285156250001,-24.327076540018634],
            			[-111.884765625,-24.327076540018634],
            			[-111.884765625,-29.764377375163114],
            			[-124.67285156250001,-29.764377375163114]]]
			    },
			    "properties": {
			        "id": "U1-063",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-106.61132812499999,-29.878755346037963],
            			[-106.61132812499999,-24.367113562651262],
            			[-98.349609375,-24.367113562651262],
            			[-98.349609375,-29.878755346037963],
            			[-106.61132812499999,-29.878755346037963]]]
			    },
			    "properties": {
			        "id": "U1-064",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.73876953125,-10.854886268472447],
            			[-124.73876953125,-4.718777551249855],
            			[-111.796875,-4.718777551249855],
            			[-111.796875,-10.854886268472447],
            			[-124.73876953125,-10.854886268472447]]]
			    },
			    "properties": {
			        "id": "U1-066A",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,-17.539296556236692],
            			[-124.76074218749999,-11.501556900932487],
            			[-111.796875,-11.501556900932487],
            			[-111.796875,-17.539296556236692],
            			[-124.76074218749999,-17.539296556236692]]]
			    },
			    "properties": {
			        "id": "U1-066B",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,-23.725011735951796],
            			[-124.76074218749999,-18.145851771694467],
            			[-111.81884765624999,-18.145851771694467],
            			[-111.81884765624999,-23.725011735951796],
            			[-124.76074218749999,-23.725011735951796]]]
			    },
			    "properties": {
			        "id": "U1-066C",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,-4.127285323245357],
            			[-124.76074218749999,5.462895560209557],
            			[-111.796875,5.462895560209557],
            			[-111.796875,-4.127285323245357],
            			[-124.76074218749999,-4.127285323245357]]]
			    },
			    "properties": {
			        "id": "U1-067",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,6.031310707125822],
            			[-124.76074218749999,12.297068292853817],
            			[-111.8408203125,12.297068292853817],
            			[-111.8408203125,6.031310707125822],
            			[-124.76074218749999,6.031310707125822]]]
			    },
			    "properties": {
			        "id": "U1-068",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,2.747516274952726],
            			[-124.76074218749999,21.820707853875017],
            			[-111.8408203125,21.820707853875017],
            			[-111.8408203125,12.747516274952726],
            			[-124.76074218749999,12.747516274952726]]]
			    },
			    "properties": {
			        "id": "U1-069",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,22.39071391683855],
            			[-124.76074218749999,27.97499795326776],
            			[-115.04882812499999,27.97499795326776],
            			[-115.04882812499999,22.39071391683855],
            			[-124.76074218749999,22.39071391683855]]]
			    },
			    "properties": {
			        "id": "U1-069B",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-106.69921875,-7.5585466060931426],
            			[-106.69921875,1.9332268264771233],
            			[-98.28369140625,1.9332268264771233],
            			[-98.28369140625,-7.5585466060931426],
            			[-106.69921875,-7.5585466060931426]]]
			    },
			    "properties": {
			        "id": "U1-070",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-106.69921875,2.5699386165358966],
            			[-106.69921875,8.776510716052352],
            			[-98.23974609375,8.776510716052352],
            			[-98.23974609375,2.5699386165358966],
            			[-106.69921875,2.5699386165358966]]]
			    },
			    "properties": {
			        "id": "U1-071",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-106.69921875,9.405710041600022],
            			[-106.69921875,15.432500881886055],
            			[-98.26171875,15.432500881886055],
            			[-98.26171875,9.405710041600022],
            			[-106.69921875,9.405710041600022]]]
			    },
			    "properties": {
			        "id": "U1-072",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-124.76074218749999,28.459033019728043],
            			[-124.76074218749999,44.37098696297173],
            			[-115.31249999999999,44.37098696297173],
            			[-115.31249999999999,28.459033019728043],
            			[-124.76074218749999,28.459033019728043]]]
			    },
			    "properties": {
			        "id": "U1-073",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-97.62451171875,28.478348692223165],
            			[-97.62451171875,44.37098696297173],
            			[-88.06640625,44.37098696297173],
            			[-88.06640625,28.478348692223165],
            			[-97.62451171875,28.478348692223165]]]
			    },
			    "properties": {
			        "id": "U1-077",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-87.5390625,28.478348692223165],
            			[-87.5390625,44.402391829093915],
            			[-81.23291015625,44.402391829093915],
            			[-81.23291015625,28.478348692223165],
            			[ -87.5390625,28.478348692223165]]]
			    },
			    "properties": {
			        "id": "U1-079",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-80.595703125,28.420391085674304],
            			[-80.595703125,44.37098696297173],
            			[-67.763671875,44.37098696297173],
            			[-67.763671875,28.420391085674304],
            			[-80.595703125,28.420391085674304]]]
			    },
			    "properties": {
			        "id": "U1-081",
			        "message":  "",
			        "status": "Available"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-67.0166015625,28.420391085674304],
            			[-67.0166015625,44.402391829093915],
            			[-57.568359375,44.402391829093915],
            			[-57.568359375,28.420391085674304],
            			[-67.0166015625,28.420391085674304]]]
			    },
			    "properties": {
			        "id": "U1-084A",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-56.865234375,28.459033019728043],
            			[-56.865234375,44.37098696297173],
            			[-43.9013671875,44.37098696297173],
            			[-43.9013671875,28.459033019728043],
            			[-56.865234375,28.459033019728043]]]
			    },
			    "properties": {
			        "id": "U1-084B",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.3740234375,16.04581345375217],
            			[-43.3740234375,21.820707853875017],
            			[-30.454101562499996,21.820707853875017],
            			[-30.454101562499996,16.04581345375217],
            			[-43.3740234375,16.04581345375217]]]
			    },
			    "properties": {
			        "id": "U1-089",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.41796875,9.362352822055605],
            			[-43.41796875,15.411319377980993],
            			[-30.454101562499996,15.411319377980993],
            			[-30.454101562499996,9.362352822055605],
            			[-43.41796875,9.362352822055605]]]
			    },
			    "properties": {
			        "id": "U1-090",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.33007812499999,2.67968661580376],
            			[-43.33007812499999,8.754794702435618],
            			[-30.41015625,8.754794702435618],
            			[-30.41015625,2.67968661580376],
            			[-43.33007812499999,2.67968661580376]]]
			    },
			    "properties": {
			        "id": "U1-091",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.3740234375,-4.149200693099276],
            			[-43.3740234375,1.911266535096585],
            			[-34.98046875,1.911266535096585],
            			[-34.98046875,-4.149200693099276],
            			[-43.3740234375,-4.149200693099276]]]
			    },
			    "properties": {
			        "id": "U1-092",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.3740234375,-10.833305983642491],
            			[-43.3740234375,-4.740675384778361],
            			[-35.00244140625,-4.740675384778361],
            			[-35.00244140625,-10.833305983642491],
            			[-43.3740234375,-10.833305983642491]]]
			    },
			    "properties": {
			        "id": "U1-093",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.43994140625,-17.455472579972827],
            			[-43.43994140625,-11.45849075265386],
            			[-34.95849609375,-11.45849075265386],
            			[-34.95849609375,-17.455472579972827],
            			[-43.43994140625,-17.455472579972827]]]
			    },
			    "properties": {
			        "id": "U1-094",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.39599609375,-23.725011735951796],
            			[-43.39599609375,-17.936928637549432],
            			[-34.98046875,-17.936928637549432],
            			[-34.98046875,-23.725011735951796],
            			[-43.39599609375,-23.725011735951796]]]
			    },
			    "properties": {
			        "id": "U1-095",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    },
		    {
		        'type': 'Feature',
			    'geometry': {
			    	"type": "Polygon",
					"coordinates": [[[-43.41796875,-29.707139348134145],
            			[-43.41796875,-24.307053283225915],
            			[-34.98046875,-24.307053283225915],
            			[-34.98046875,-29.707139348134145],
            			[-43.41796875,-29.707139348134145]]]
			    },
			    "properties": {
			        "id": "U1-096",
			        "message":  "",
			        "status": "NotAvailable"
			    }
		    }]
		}
	});


	var statusColor = [
		['NotAvailable', '#ED4A4C'],
		['Available', '#8AC854']
    ];

	statusColor.forEach(function (layer, i) {
		map.addLayer({
		    "id": "room-" + i,
		    "type": "fill",
		    "source": "rooms",
		    "paint": {
		        'fill-color': layer[1], 
		         "fill-opacity": 0.75
		    },
			"filter":["==", "status", layer[0]]
		});
	});


});

// map.on('click', function (e) {
// 	for (var i = 0; i < 31; i++) {
	
// 		var features = map.queryRenderedFeatures(e.point, { layers: ['room-' + i] });
// 		if (!features.length) {
// 			return;
// 		}

// 		var feature = features[0];

// 		var popup = new mapboxgl.Popup()
// 			.setLngLat(map.unproject(e.point))
// 			.setHTML(feature.properties.message)
// 			.addTo(map);
// 	}
// });

// map.on('mousemove', function (e) {
// 	for (var i = 0; i < 31; i++) {
// 		var features = map.queryRenderedFeatures(e.point, { layers: ['room-' + i] });
// 		map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
// 	}
// });




